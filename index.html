<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KHATA PRO V20 - TEST MODE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; }
        body { background: #0f172a; color: white; font-family: sans-serif; margin: 0; }
        .btn { width: 100%; padding: 15px; border-radius: 10px; font-weight: bold; border: none; cursor: pointer; }
        .input-box { width: 100%; padding: 15px; margin-bottom: 10px; border-radius: 10px; border: 1px solid #334155; background: #1e293b; color: white; outline: none; }
    </style>
</head>
<body>

    <div style="max-width: 450px; margin: auto; padding: 20px;">
        <h1 style="text-align: center; color: #3b82f6;">KHATA PRO V20</h1>
        <p id="status" style="text-align: center; font-size: 12px; color: #10b981;">System Ready</p>

        <div style="background: #1e293b; padding: 20px; border-radius: 15px; margin-top: 20px;">
            <input type="text" id="cName" class="input-box" placeholder="Enter Name">
            <input type="number" id="cPhone" class="input-box" placeholder="Phone Number">
            <button onclick="manualSave()" class="btn" style="background: #2563eb; color: white;">SAVE NOW</button>
        </div>

        <div id="displayArea" style="margin-top: 30px;">
            </div>
    </div>

    <script>
        // ഡാറ്റാബേസ് പേര് മാറ്റുന്നത് പഴയ ക്യാഷ് (Cache) ഒഴിവാക്കാൻ സഹായിക്കും
        const DB_KEY = 'KHATA_FINAL_V20';

        function showData() {
            const data = JSON.parse(localStorage.getItem(DB_KEY)) || [];
            const area = document.getElementById('displayArea');
            area.innerHTML = '<h3 style="opacity:0.5">Saved List:</h3>';
            
            data.forEach((item, index) => {
                area.innerHTML += `
                    <div style="background:#334155; padding:15px; border-radius:10px; margin-bottom:10px; display:flex; justify-content:space-between;">
                        <span>${item.name}</span>
                        <span style="color:#94a3b8">${item.phone}</span>
                    </div>
                `;
            });
        }

        function manualSave() {
            const name = document.getElementById('cName').value.trim();
            const phone = document.getElementById('cPhone').value.trim();

            if(!name) {
                alert("Please type a name!");
                return;
            }

            // നിലവിലുള്ള ഡാറ്റ എടുക്കുന്നു
            let currentData = JSON.parse(localStorage.getItem(DB_KEY)) || [];
            
            // പുതിയ ഡാറ്റ ചേർക്കുന്നു
            currentData.push({ name: name, phone: phone });

            // സേവ് ചെയ്യുന്നു
            localStorage.setItem(DB_KEY, JSON.stringify(currentData));

            // ഇൻപുട്ട് ക്ലിയർ ചെയ്യുന്നു
            document.getElementById('cName').value = '';
            document.getElementById('cPhone').value = '';

            // ലിസ്റ്റ് പുതുക്കുന്നു
            showData();

            // വിജയിച്ചാൽ അറിയിപ്പ് നൽകുന്നു
            document.getElementById('status').innerText = "✅ Saved: " + name;
            setTimeout(() => { document.getElementById('status').innerText = "System Ready"; }, 2000);
        }

        // പേജ് ലോഡ് ആകുമ്പോൾ ഡാറ്റ കാണിക്കുക
        window.onload = showData;
    </script>
</body>
</html>